<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>登录|注册-生态文明网</title>
    <link rel="shortcut icon" href="images/camera.ico" />
    <link rel="stylesheet" href="css/login.css" />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <!-- 导航栏 -->
    <nav class="navbar">
      <div class="container">
        <!-- Logo -->
        <div class="logo-container">
          <a href="#home" class="logo-link">
            <img src="images/logo.jpg" alt="网站Logo" class="logo-img" />
          </a>
        </div>

        <!--导航链接-->
        <div class="nav-links">
          <a href="index.html" class="navbar-link">首页</a>
          <a href="news.html" class="navbar-link">实践与政策</a>
          <a href="about.html" class="navbar-link">相关知识</a>
          <a href="knowledgequiz.html" class="navbar-link active">知识问答</a>
        </div>

        <!-- 搜索框（居中） -->
        <div class="search-container">
          <form action="/search" method="GET" class="search-form">
            <input
              type="text"
              placeholder="搜索..."
              name="q"
              class="search-input"
            />
            <button type="submit" class="search-button">
              <i class="fa fa-search"></i>
            </button>
          </form>
        </div>

        <!-- 登录/注册 -->
        <div class="auth-links">
          <a href="#login" class="auth-link">登录</a>
          <span class="divider">|</span>
          <a href="#register" class="auth-link">注册</a>
        </div>
      </div>
    </nav>

    <!-- 主要内容区 -->
    <main class="login-container">
      <div class="login-bg">
        <!-- 背景图会通过CSS设置 -->
      </div>

      <div class="login-card">
        <div class="login-header">
          <h2 class="login-title">用户登录</h2>
          <div class="login-tabs">
            <a
              href="#password-login"
              class="login-tab active"
              data-target="password-form"
              >密码登录</a
            >
            <a href="#sms-login" class="login-tab" data-target="sms-form"
              >短信验证码</a
            >
          </div>
        </div>

        <!-- 密码登录表单 -->
        <form id="password-form" class="login-form active">
          <!-- 用户名/邮箱 -->
          <div class="form-group">
            <div class="input-wrapper">
              <span class="input-icon">
                <i class="fa fa-user"></i>
              </span>
              <input
                type="text"
                id="username"
                placeholder="请输入用户名或邮箱"
                class="login-input"
              />
            </div>
          </div>

          <!-- 密码 -->
          <div class="form-group">
            <div class="input-wrapper">
              <span class="input-icon">
                <i class="fa fa-lock"></i>
              </span>
              <input
                type="password"
                id="password"
                placeholder="请输入密码"
                class="login-input"
              />
              <button type="button" class="toggle-password">
                <i class="fa fa-eye-slash"></i>
              </button>
            </div>
          </div>

          <!-- 记住密码 -->
          <div class="form-group remember-me">
            <label class="checkbox-label">
              <input type="checkbox" class="checkbox" />
              <span class="checkbox-custom"></span>
              记住密码
            </label>
            <a href="#" class="forgot-password-link">忘记密码?</a>
          </div>

          <!-- 登录按钮 -->
          <div class="form-group">
            <button type="submit" class="login-button">登录</button>
          </div>
        </form>

        <!-- 短信验证码登录表单 -->
        <form id="sms-form" class="login-form" style="display: none">
          <!-- 手机号 -->
          <div class="form-group">
            <div class="input-wrapper">
              <span class="input-icon">
                <i class="fa fa-phone"></i>
              </span>
              <input
                type="tel"
                id="phone"
                placeholder="请输入手机号"
                class="login-input"
              />
            </div>
          </div>

          <!-- 验证码 -->
          <div class="form-group">
            <div class="input-wrapper">
              <span class="input-icon">
                <i class="fa fa-shield"></i>
              </span>
              <input
                type="text"
                id="verify-code"
                placeholder="请输入验证码"
                class="login-input"
              />
              <button type="button" id="get-code-btn" class="get-code-button">
                获取验证码
              </button>
            </div>
          </div>

          <!-- 登录按钮 -->
          <div class="form-group">
            <button type="submit" class="login-button">登录</button>
          </div>
        </form>

        <!-- 注册链接 -->
        <div class="form-group register-link">
          <p>
            还没有账号?
            <a href="register.html" class="register-text">立即注册</a>
          </p>
        </div>
      </div>
    </main>

    <!--------------Footer--------------->
    <footer class="footer">
      <div class="footer-bottom">
        <p>姓名：蓝舒芬 | 班级：计算机23-3班 | 学号：231002618</p>
      </div>
    </footer>

    <!-- JavaScript -->
    <script>
      // 表单切换
      const loginTabs = document.querySelectorAll(".login-tab");
      const loginForms = document.querySelectorAll(".login-form");

      loginTabs.forEach((tab) => {
        tab.addEventListener("click", function (e) {
          e.preventDefault();

          // 移除所有标签和表单的激活状态
          loginTabs.forEach((t) => t.classList.remove("active"));
          loginForms.forEach((form) => {
            form.classList.remove("active");
            form.style.display = "none";
          });

          // 添加当前标签和对应表单的激活状态
          this.classList.add("active");
          const targetForm = document.getElementById(
            this.getAttribute("data-target")
          );
          targetForm.classList.add("active");
          targetForm.style.display = "flex";
        });
      });

      // 密码显示/隐藏切换
      document
        .querySelector(".toggle-password")
        .addEventListener("click", function () {
          const passwordInput = document.getElementById("password");
          const icon = this.querySelector("i");

          if (passwordInput.type === "password") {
            passwordInput.type = "text";
            icon.classList.remove("fa-eye-slash");
            icon.classList.add("fa-eye");
          } else {
            passwordInput.type = "password";
            icon.classList.remove("fa-eye");
            icon.classList.add("fa-eye-slash");
          }
        });

      // 自定义复选框样式
      const checkboxes = document.querySelectorAll(".checkbox");
      checkboxes.forEach((checkbox) => {
        checkbox.addEventListener("change", function () {
          const customCheckbox = this.nextElementSibling;
          if (this.checked) {
            customCheckbox.classList.add("checked");
          } else {
            customCheckbox.classList.remove("checked");
          }
        });
      });

      // 密码登录表单验证
      document
        .getElementById("password-form")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const username = document.getElementById("username").value;
          const password = document.getElementById("password").value;

          if (!username || !password) {
            alert("请输入用户名和密码");
            return;
          }

          // 模拟登录成功，跳转到首页
          alert("密码登录成功！");
          window.location.href = "index.html";
        });

      // 短信验证码登录表单验证
      document
        .getElementById("sms-form")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const phone = document.getElementById("phone").value;
          const code = document.getElementById("verify-code").value;

          if (!phone) {
            alert("请输入手机号");
            return;
          }

          if (!code) {
            alert("请输入验证码");
            return;
          }

          // 模拟登录成功，跳转到首页
          alert("短信验证码登录成功！");
          window.location.href = "index.html";
        });

      // 获取验证码功能
      const getCodeBtn = document.getElementById("get-code-btn");
      let countdown = 60;

      getCodeBtn.addEventListener("click", function () {
        const phone = document.getElementById("phone").value;

        // 验证手机号格式
        const phoneRegex = /^1[3-9]\d{9}$/;
        if (!phoneRegex.test(phone)) {
          alert("请输入有效的手机号");
          return;
        }

        // 开始倒计时
        this.disabled = true;
        this.textContent = `${countdown}秒后重新获取`;

        const timer = setInterval(() => {
          countdown--;
          this.textContent = `${countdown}秒后重新获取`;

          if (countdown <= 0) {
            clearInterval(timer);
            this.disabled = false;
            this.textContent = "获取验证码";
            countdown = 60;
          }
        }, 1000);

        // 模拟发送验证码
        console.log(`向手机号 ${phone} 发送验证码`);
        alert("验证码已发送，请注意查收");
      });
    </script>
  </body>
</html>
